#include<Arduino.h>
const PROGMEM char PAGE_SETTINGS[] = "<!DOCTYPE html>\n<html>\n\n<head>\n<title>Doorman Configuration</title>\n<style>\nbody {\nfont-family: Arial, sans-serif;\nmargin: 20px;\n}\n\nh1 {\ntext-align: center;\n}\n\nform {\nmax-width: 500px;\nmargin: 0 auto;\n}\n\ntable {\nwidth: 100%;\nborder-collapse: collapse;\n}\n\nth,\ntd {\npadding: 10px;\ntext-align: left;\n}\n\nth {\nbackground-color: #f2f2f2;\n}\n\ninput[type=\"text\"] {\nwidth: 100%;\npadding: 8px;\nborder: 1px solid #ccc;\nborder-radius: 4px;\nbox-sizing: border-box;\n}\n\ninput[type=\"submit\"] {\nbackground-color: #4CAF50;\ncolor: #fff;\npadding: 10px 20px;\nborder: none;\nborder-radius: 4px;\ncursor: pointer;\nfloat: right;\n}\n\ninput[type=\"submit\"]:hover {\nbackground-color: #45a049;\n}\n\n#feedback {\nmargin-top: 10px;\ncolor: #f00;\ntext-align: center; /* Center the error message */\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n#menu {\nmargin-top: 10px;\ncolor: #00f;\ntext-align: center; /* Center the error message */\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n#version {\nmargin-top: 10px;\ncolor: #000;\ntext-align: center;\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n</style>\n\n</head>\n\n<body>\n<h1>Doorman Configuration Page: Wifi</h1>\n<div id=\"menu\">\n<a href=\"codes\">Codes</a> <a href=\"settings\">Settings</a>\n</div>\n<form id=\"configForm\">\n<table>\n<tr>\n<th>Setting</th>\n<th>Value</th>\n</tr>\n<tr>\n<td>Wifi SSID</td>\n<td><input type=\"text\" name=\"wifiSsid\" maxlength=\"150\" required></td>\n</tr>\n<tr>\n<td>Wifi Password</td>\n<td><input type=\"text\" name=\"wifiPassword\" maxlength=\"150\" required></td>\n</tr>\n<tr>\n<td>MQTT Server</td>\n<td><input type=\"text\" name=\"mqttServer\" maxlength=\"150\" required></td>\n</tr>\n<tr>\n<td>MQTT Port</td>\n<td><input type=\"text\" name=\"mqttPort\" maxlength=\"8\" required></td>\n</tr>\n<tr>\n<td>MQTT User</td>\n<td><input type=\"text\" name=\"mqttUser\"></td>\n</tr>\n<tr>\n<td>MQTT Password</td>\n<td><input type=\"text\" name=\"mqttPassword\" maxlength=\"8\"></td>\n</tr>\n</table>\n<div id=\"feedback\"></div>\n<div id=\"version\"></div>\n<br>\n<input type=\"submit\" value=\"Save Configuration\">\n\n</form>\n<script>\n// Function to fetch and populate the configuration data\nfunction populateConfig() {\n// Fetch the current configuration from the ESP8266\nfetch('/getSettings', {\nmethod: 'GET',\n})\n.then(response => response.json())\n.then(data => {\n// Populate the input fields with the retrieved values\ndocument.getElementById(\"configForm\").elements[\"wifiSsid\"].value = data.wifiSsid;\ndocument.getElementById(\"configForm\").elements[\"wifiPassword\"].value = data.wifiPassword;\ndocument.getElementById(\"configForm\").elements[\"mqttServer\"].value = data.mqttServer;\ndocument.getElementById(\"configForm\").elements[\"mqttPort\"].value = data.mqttPort;\ndocument.getElementById(\"configForm\").elements[\"mqttUser\"].value = data.mqttUser;\ndocument.getElementById(\"configForm\").elements[\"mqttPassword\"].value = data.mqttPassword;\ndocument.getElementById(\"version\").textContent = data.Version;\n\n})\n.catch(error => {\nconsole.error('Error:', error);\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = \"An error occurred while fetching the configuration.\";\n});\n}\n\n// Call the function to populate the configuration on page load\nwindow.addEventListener('load', populateConfig);\n\n// Handle form submission\ndocument.getElementById(\"configForm\").onsubmit = function (event) {\nevent.preventDefault(); // Prevent form from submitting normally\n\n// Get form data\nconst formData = new FormData(event.target);\n\n// Convert form data to a JSON object\nconst configData = {};\nformData.forEach((value, key) => {\nconfigData[key] = value;\n});\n\n\n// Send the configuration data to the server (ESP8266)\nfetch('/setSettings', {\nmethod: 'POST',\nheaders: {\n'Content-Type': 'application/json'\n},\nbody: JSON.stringify(configData)\n})\n.then(response => response.json())\n.then(data => {\n// Display feedback to the user\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = data.message;\n})\n.catch(error => {\nconsole.error('Error:', error);\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = \"An error occurred while saving the configuration.\";\n});\n};\n// Validate input fields to accept only hexadecimal numbers\n/**\nconst hexInputFields = document.querySelectorAll('input[type=\"text\"]');\nhexInputFields.forEach(field => {\nfield.addEventListener('input', () => {\nconst inputValue = field.value;\nconst isValidHex = /^[0-9a-fA-F]*$/.test(inputValue);\nif (!isValidHex) {\nfield.setCustomValidity(\"Please enter a valid hexadecimal number.\");\n} else {\nfield.setCustomValidity(\"\");\n}\n});\n});\n*/\n</script>\n</body>\n\n</html>\n";
const PROGMEM char PAGE_MAIN[] = "<!DOCTYPE html>\n<html>\n\n<head>\n<title>Doorman Configuration</title>\n<style>\nbody {\nfont-family: Arial, sans-serif;\nmargin: 20px;\n}\n\nh1 {\ntext-align: center;\n}\n\nform {\nmax-width: 500px;\nmargin: 0 auto;\n}\n\ntable {\nwidth: 100%;\nborder-collapse: collapse;\n}\n\nth,\ntd {\npadding: 10px;\ntext-align: left;\n}\n\nth {\nbackground-color: #f2f2f2;\n}\n\ninput[type=\"text\"] {\nwidth: 100%;\npadding: 8px;\nborder: 1px solid #ccc;\nborder-radius: 4px;\nbox-sizing: border-box;\n}\n\ninput[type=\"submit\"] {\nbackground-color: #4CAF50;\ncolor: #fff;\npadding: 10px 20px;\nborder: none;\nborder-radius: 4px;\ncursor: pointer;\nfloat: right;\n}\n\ninput[type=\"submit\"]:hover {\nbackground-color: #45a049;\n}\n\n#feedback {\nmargin-top: 10px;\ncolor: #f00;\ntext-align: center; /* Center the error message */\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n#menu {\nmargin-top: 10px;\ncolor: #00f;\ntext-align: center; /* Center the error message */\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n#version {\nmargin-top: 10px;\ncolor: #000;\ntext-align: center;\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n</style>\n\n</head>\n\n<body>\n<h1>Doorman Configuration Page</h1>\n<div id=\"menu\">\n<a href=\"codes\">Codes</a> <a href=\"settings\">Settings</a>\n</div>\n<div id=\"version\"></div>\n\n<script>\n// Function to fetch and populate the configuration data\nfunction populateConfig() {\n// Fetch the current configuration from the ESP8266\nfetch('/getCodes', {\nmethod: 'GET',\n})\n.then(response => response.json())\n.then(data => {\ndocument.getElementById(\"version\").textContent = data.version;\n\n})\n.catch(error => {\nconsole.error('Error:', error);\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = \"An error occurred while fetching the configuration.\";\n});\n}\n\n// Call the function to populate the configuration on page load\nwindow.addEventListener('load', populateConfig);\n</script>\n</body>\n\n</html>\n";
const PROGMEM char PAGE_CODES[] = "<!DOCTYPE html>\n<html>\n\n<head>\n<title>Doorman Configuration</title>\n<style>\nbody {\nfont-family: Arial, sans-serif;\nmargin: 20px;\n}\n\nh1 {\ntext-align: center;\n}\n\nform {\nmax-width: 500px;\nmargin: 0 auto;\n}\n\ntable {\nwidth: 100%;\nborder-collapse: collapse;\n}\n\nth,\ntd {\npadding: 10px;\ntext-align: left;\n}\n\nth {\nbackground-color: #f2f2f2;\n}\n\ninput[type=\"text\"] {\nwidth: 100%;\npadding: 8px;\nborder: 1px solid #ccc;\nborder-radius: 4px;\nbox-sizing: border-box;\n}\n\ninput[type=\"submit\"] {\nbackground-color: #4CAF50;\ncolor: #fff;\npadding: 10px 20px;\nborder: none;\nborder-radius: 4px;\ncursor: pointer;\nfloat: right;\n}\n\ninput[type=\"submit\"]:hover {\nbackground-color: #45a049;\n}\n\n#feedback {\nmargin-top: 10px;\ncolor: #f00;\ntext-align: center; /* Center the error message */\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n#menu {\nmargin-top: 10px;\ncolor: #00f;\ntext-align: center; /* Center the error message */\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n#version {\nmargin-top: 10px;\ncolor: #000;\ntext-align: center;\ndisplay: block; /* Ensure the div behaves as a block-level element */\nwidth: 100%; /* Span the entire width of its parent container */\nclear: both; /* Clear the float after the submit button */\n}\n</style>\n\n</head>\n\n<body>\n<h1>Doorman Configuration Page: Codes</h1>\n<div id=\"menu\">\n<a href=\"codes\">Codes</a> <a href=\"settings\">Settings</a>\n</div>\n<form id=\"configForm\">\n<table>\n<tr>\n<th>Setting</th>\n<th>Value (Hexadecimal)</th>\n</tr>\n<tr>\n<td>Apartment Door Bell Code</td>\n<td><input type=\"text\" name=\"codeApartmentDoorBell\" maxlength=\"8\" required></td>\n</tr>\n<tr>\n<td>Entry Door Bell Code</td>\n<td><input type=\"text\" name=\"codeEntryDoorBell\" maxlength=\"8\" required></td>\n</tr>\n<tr>\n<td>Handset Liftup Code</td>\n<td><input type=\"text\" name=\"codeHandsetLiftup\" maxlength=\"8\" required></td>\n</tr>\n<tr>\n<td>Door Opener Code</td>\n<td><input type=\"text\" name=\"codeDoorOpener\" maxlength=\"8\" required></td>\n</tr>\n<tr>\n<td>Apartment Door Pattern Detection Code<br />(When this pattern is detected, mqtt message will be sent)</td>\n<td><input type=\"text\" name=\"codeApartmentPatternDetect\" required></td>\n</tr>\n<tr>\n<td>Entry Door Pattern Detection<br />(When this pattern is detected, door opener will be sent)</td>\n<td><input type=\"text\" name=\"codeEntryPatternDetect\" maxlength=\"8\" required></td>\n</tr>\n<tr>\n<td>Entry Door Party Mode<br />(When this code is detected, the Door opener code is sent when party mode is enabled)</td>\n<td><input type=\"text\" name=\"codePartyMode\" maxlength=\"8\" required></td>\n</tr>\n</table>\n<div id=\"feedback\"></div>\n<div id=\"version\"></div>\n<br>\n<input type=\"submit\" value=\"Save Configuration\">\n\n</form>\n<script>\n// Function to fetch and populate the configuration data\nfunction populateConfig() {\n// Fetch the current configuration from the ESP8266\nfetch('/getCodes', {\nmethod: 'GET',\n})\n.then(response => response.json())\n.then(data => {\n// Populate the input fields with the retrieved values\ndocument.getElementById(\"configForm\").elements[\"codeApartmentDoorBell\"].value = data.codeApartmentDoorBell.toString(16).padStart(8, '0');\ndocument.getElementById(\"configForm\").elements[\"codeEntryDoorBell\"].value = data.codeEntryDoorBell.toString(16).padStart(8, '0');\ndocument.getElementById(\"configForm\").elements[\"codeHandsetLiftup\"].value = data.codeHandsetLiftup.toString(16).padStart(8, '0');\ndocument.getElementById(\"configForm\").elements[\"codeDoorOpener\"].value = data.codeDoorOpener.toString(16).padStart(8, '0');\ndocument.getElementById(\"configForm\").elements[\"codeApartmentPatternDetect\"].value = data.codeApartmentPatternDetect.toString(16).padStart(8, '0');\ndocument.getElementById(\"configForm\").elements[\"codeEntryPatternDetect\"].value = data.codeEntryPatternDetect.toString(16).padStart(8, '0');\ndocument.getElementById(\"configForm\").elements[\"codePartyMode\"].value = data.codePartyMode.toString(16).padStart(8, '0');\ndocument.getElementById(\"version\").textContent = data.version;\n\n})\n.catch(error => {\nconsole.error('Error:', error);\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = \"An error occurred while fetching the configuration.\";\n});\n}\n\n// Call the function to populate the configuration on page load\nwindow.addEventListener('load', populateConfig);\n\n// Handle form submission\ndocument.getElementById(\"configForm\").onsubmit = function (event) {\nevent.preventDefault(); // Prevent form from submitting normally\n\n// Get form data\nconst formData = new FormData(event.target);\n\n// Convert form data to a JSON object\nconst configData = {};\nformData.forEach((value, key) => {\nconfigData[key] = parseInt(value, 16);\n});\n\n\n// Send the configuration data to the server (ESP8266)\nfetch('/setCodes', {\nmethod: 'POST',\nheaders: {\n'Content-Type': 'application/json'\n},\nbody: JSON.stringify(configData)\n})\n.then(response => response.json())\n.then(data => {\n// Display feedback to the user\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = data.message;\n})\n.catch(error => {\nconsole.error('Error:', error);\nconst feedbackDiv = document.getElementById(\"feedback\");\nfeedbackDiv.textContent = \"An error occurred while saving the configuration.\";\n});\n};\n// Validate input fields to accept only hexadecimal numbers\nconst hexInputFields = document.querySelectorAll('input[type=\"text\"]');\nhexInputFields.forEach(field => {\nfield.addEventListener('input', () => {\nconst inputValue = field.value;\nconst isValidHex = /^[0-9a-fA-F]*$/.test(inputValue);\nif (!isValidHex) {\nfield.setCustomValidity(\"Please enter a valid hexadecimal number.\");\n} else {\nfield.setCustomValidity(\"\");\n}\n});\n});\n</script>\n</body>\n\n</html>\n";
